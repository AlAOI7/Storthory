<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>الدفع | Be Pretty</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header class="bg-white shadow-sm p-3 fixed-top">
        <div class="d-flex justify-content-between align-items-center">
            <a href="cart.html" class="btn"><i class="fas fa-arrow-right fa-lg text-dark"></i></a>
            <h5 class="mb-0 fw-bold">الدفع</h5>
            <span></span>
        </div>
    </header>

    <main class="container-fluid py-4" style="margin-top: 60px; margin-bottom: 70px;">

        <section class="order-summary-section bg-white p-4 rounded-3 shadow-sm mb-4">
            <h5 class="fw-bold mb-3">ملخص الطلب</h5>
            <div id="order-items" class="d-flex flex-column gap-3 mb-3">
                <div class="d-flex align-items-center border-bottom pb-2">
                    <img src="img/1.jpg" class="img-fluid rounded me-3" style="width: 50px; height: 50px; object-fit: cover;">
                    <div class="flex-grow-1">
                        <p class="mb-0 fw-bold">منتج العناية بالبشرة <small class="text-muted">(x1)</small></p>
                    </div>
                    <span class="fw-bold">150 ر.س</span>
                </div>
                <div class="d-flex align-items-center border-bottom pb-2">
                    <img src="img/2.jpg" class="img-fluid rounded me-3" style="width: 50px; height: 50px; object-fit: cover;">
                    <div class="flex-grow-1">
                        <p class="mb-0 fw-bold">مجموعة المكياج <small class="text-muted">(x1)</small></p>
                    </div>
                    <span class="fw-bold">250 ر.س</span>
                </div>
            </div>

            <div class="d-flex justify-content-between mb-2">
                <span class="text-muted">المجموع الفرعي</span>
                <span class="fw-bold"><span id="subtotal">400</span> ر.س</span>
            </div>
            <div class="d-flex justify-content-between mb-2">
                <span class="text-muted">الخصم</span>
                <span class="fw-bold text-success">- <span id="discount">0</span> ر.س</span>
            </div>
            <div class="d-flex justify-content-between mb-2">
                <span class="text-muted">تكاليف الشحن</span>
                <span class="fw-bold"><span id="shipping">15</span> ر.س</span>
            </div>
            <hr>
            <div class="d-flex justify-content-between fw-bold fs-5">
                <span>المجموع الكلي</span>
                <span class="text-danger"><span id="total-price">415</span> ر.س</span>
            </div>
        </section>

        <section class="coupon-section mb-4">
            <div class="input-group">
                <input type="text" id="coupon-code" class="form-control rounded-start" placeholder="أدخل رمز القسيمة">
                <button class="btn btn-outline-danger" type="button" id="apply-coupon-btn">تطبيق</button>
            </div>
        </section>

        <section class="payment-section bg-white p-4 rounded-3 shadow-sm mb-4">
            <h5 class="fw-bold mb-3">طريقة الدفع</h5>
            <div class="d-flex flex-column gap-3">
                <label class="btn btn-outline-danger p-3 rounded-3 text-start payment-option active" data-method="cash">
                    <input type="radio" name="payment-method" class="d-none" checked>
                    <i class="fas fa-wallet fa-lg me-3"></i>
                    الدفع عند الاستلام
                </label>
                <label class="btn btn-outline-danger p-3 rounded-3 text-start payment-option" data-method="bank">
                    <input type="radio" name="payment-method" class="d-none">
                    <i class="fas fa-university fa-lg me-3"></i>
                    الدفع البنكي
                </label>
                <label class="btn btn-outline-danger p-3 rounded-3 text-start payment-option" data-method="online">
                    <input type="radio" name="payment-method" class="d-none">
                    <i class="fas fa-credit-card fa-lg me-3"></i>
                    بطاقة ائتمانية (قريباً)
                </label>
            </div>
        </section>

        <form id="payment-form">
            <section id="cash-form" class="bg-white p-4 rounded-3 shadow-sm mb-4">
                <h5 class="fw-bold mb-3">بيانات التوصيل</h5>
                <div class="mb-3">
                    <label for="full-name-cash" class="form-label">الاسم الكامل</label>
                    <input type="text" class="form-control" id="full-name-cash" required>
                </div>
                <div class="mb-3">
                    <label for="phone-cash" class="form-label">رقم الهاتف</label>
                    <input type="tel" class="form-control" id="phone-cash" required>
                </div>
                <div class="mb-3">
                    <label for="address-cash" class="form-label">العنوان الكامل</label>
                    <textarea class="form-control" id="address-cash" rows="3" required></textarea>
                </div>
            </section>

            <section id="bank-form" class="bg-white p-4 rounded-3 shadow-sm mb-4 d-none">
                <h5 class="fw-bold mb-3">بيانات التحويل البنكي</h5>
                <div class="mb-3">
                    <label for="bank-select" class="form-label">اختر البنك</label>
                    <select class="form-select" id="bank-select">
                        <option value="yemeni-bank">البنك اليمني</option>
                        <option value="saudi-bank">البنك السعودي</option>
                        <option value="dolar-bank">حساب بالدولار</option>
                    </select>
                </div>
                <div id="bank-info" class="text-center mt-4">
                    </div>
                <div class="mb-3">
                    <label for="transfer-name" class="form-label">اسم المحول</label>
                    <input type="text" class="form-control" id="transfer-name" required>
                </div>
            </section>
            
            <button type="submit" class="btn btn-danger btn-lg w-100 rounded-pill fw-bold">إتمام الدفع</button>
        </form>
    </main>

    <nav class="bottom-tab-bar fixed-bottom bg-white shadow-lg d-flex justify-content-around align-items-center py-2">
        <a href="home.html" class="tab-item text-center text-decoration-none">
            <i class="fas fa-home fa-lg text-muted"></i>
            <span class="d-block mt-1">الرئيسية</span>
        </a>
        <a href="categories.html" class="tab-item text-center text-decoration-none">
            <i class="fas fa-th-large fa-lg text-muted"></i>
            <span class="d-block mt-1">الفئات</span>
        </a>
        <a href="cart.html" class="tab-item text-center text-decoration-none active">
            <i class="fas fa-shopping-cart fa-lg text-danger"></i>
            <span class="d-block mt-1 fw-bold text-danger">السلة</span>
        </a>
        <a href="orders.html" class="tab-item text-center text-decoration-none">
            <i class="fas fa-list-alt fa-lg text-muted"></i>
            <span class="d-block mt-1">الطلبات</span>
        </a>
        <a href="profile.html" class="tab-item text-center text-decoration-none">
            <i class="fas fa-user fa-lg text-muted"></i>
            <span class="d-block mt-1">حسابي</span>
        </a>
    </nav>
<script>
    
    
    $(document).ready(function() {
    // 1. Data simulation (This would be fetched from a backend)
    const orderDetails = {
        items: [
            { id: 1, name: 'منتج العناية بالبشرة', quantity: 1, price: 150, image: 'product1.jpg' },
            { id: 2, name: 'مجموعة المكياج', quantity: 1, price: 250, image: 'product2.jpg' }
        ],
        subtotal: 400,
        shipping: 15,
        discount: 0
    };

    const bankDetails = {
        'yemeni-bank': {
            qrCode: 'qr-yemeni.png',
            accountNumber: '1234567890',
            currency: 'ر.ي'
        },
        'saudi-bank': {
            qrCode: 'qr-saudi.png',
            accountNumber: '9876543210',
            currency: 'ر.س'
        },
        'dolar-bank': {
            qrCode: 'qr-dolar.png',
            accountNumber: '1122334455',
            currency: '$'
        }
    };

    // 2. Function to update UI with order details
    function renderOrderSummary() {
        let itemsHtml = '';
        orderDetails.items.forEach(item => {
            itemsHtml += `
                <div class="d-flex align-items-center border-bottom pb-2">
                    <img src="${item.image}" class="img-fluid rounded me-3" style="width: 50px; height: 50px; object-fit: cover;">
                    <div class="flex-grow-1">
                        <p class="mb-0 fw-bold">${item.name} <small class="text-muted">(x${item.quantity})</small></p>
                    </div>
                    <span class="fw-bold">${item.price * item.quantity} ر.س</span>
                </div>
            `;
        });
        $('#order-items').html(itemsHtml);
        
        // Update totals
        updateTotals();
    }

    // 3. Function to update totals
    function updateTotals() {
        const total = orderDetails.subtotal + orderDetails.shipping - orderDetails.discount;
        $('#subtotal').text(orderDetails.subtotal);
        $('#discount').text(orderDetails.discount);
        $('#shipping').text(orderDetails.shipping);
        $('#total-price').text(total);
    }

    // 4. Handle payment method selection
    $('.payment-option').on('click', function() {
        $('.payment-option').removeClass('active');
        $(this).addClass('active');

        const method = $(this).data('method');
        $('#cash-form, #bank-form').addClass('d-none');
        if (method === 'cash') {
            $('#cash-form').removeClass('d-none');
        } else if (method === 'bank') {
            $('#bank-form').removeClass('d-none');
            // Trigger bank select change to show initial bank info
            $('#bank-select').trigger('change');
        } else {
            // For future methods like credit card
            alert('طريقة الدفع هذه ستكون متاحة قريباً.');
        }
    });

    // 5. Handle bank selection change
    $('#bank-select').on('change', function() {
        const selectedBank = $(this).val();
        const details = bankDetails[selectedBank];
        const bankHtml = `
            <img src="${details.qrCode}" class="img-fluid mb-3" style="width: 150px; height: 150px;">
            <p class="mb-1 fw-bold">رقم الحساب: <span id="account-number">${details.accountNumber}</span></p>
            <p class="mb-0 text-muted">العملة: ${details.currency}</p>
            <button class="btn btn-sm btn-outline-secondary mt-2 copy-btn" data-clipboard-text="${details.accountNumber}">
                <i class="fas fa-copy me-2"></i>نسخ رقم الحساب
            </button>
        `;
        $('#bank-info').html(bankHtml);
    });

    // 6. Handle coupon code application
    $('#apply-coupon-btn').on('click', function() {
        const couponCode = $('#coupon-code').val().trim();
        if (couponCode === 'DISCOUNT20') {
            orderDetails.discount = 20;
            updateTotals();
            alert('تم تطبيق قسيمة الخصم بنجاح! تم خصم 20 ر.س.');
        } else {
            orderDetails.discount = 0;
            updateTotals();
            alert('رمز القسيمة غير صالح.');
        }
    });

    // 7. Handle form submission
    $('#payment-form').on('submit', function(e) {
        e.preventDefault();
        // Here you would send the data to a backend server
        alert('تم إرسال طلبك بنجاح! سيتم مراجعته.');
    });

    // 8. Handle copy button click
    $(document).on('click', '.copy-btn', function() {
        const textToCopy = $(this).data('clipboard-text');
        navigator.clipboard.writeText(textToCopy).then(() => {
            alert('تم نسخ رقم الحساب بنجاح.');
        });
    });

    // Initial render
    renderOrderSummary();
});


</script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
